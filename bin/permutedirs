#!/usr/bin/env ruby
# encoding: utf-8

require 'combos_permutedirs'
require 'uri'

=begin
s = 'https://host.dom/cgi-bin/test/apps/who/data/abc/123'

s.permute_dirs do |x| 
  u = URI(s)

  x.each do |y| 
    l = "#{u.scheme.dup}://#{u.host.dup}/#{y.to_a.join('/')}"

    STDOUT.puts(l)
  end
end
=end

begin
  # Note that permute_dirs may be called on a String or URI
  u = URI('https://host.dom/cgi-bin/test/apps/who/data/123/abc')

  u.permute_dirs do |x|
    x.each do |y|
      l = "#{u.scheme}://#{u.host}/#{y.to_a.join('/')}"

      puts l
    end
  end
rescue Exception => e
  raise(ScriptError, e.to_s)
end

exit 0
